<!DOCTYPE html>

<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Wifi Propagation</title>
		<link rel="icon" href="../_static/img/favicon.png">

		<!--Let browser know website is optimized for mobile-->
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

		<!-- Google font -->
		<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

		<!-- FreeFem++ theme specific -->
		<link rel="stylesheet" type="text/css" href="../_static/css/freefemtheme.css" />

		<!-- css -->
		<link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

		<!-- js -->
		<script src="../_static/nav.json"></script>
		<script src="../_static/js/nav.js"></script>
		<script src="../_static/js/common.js"></script>

		<!-- MathJax -->
		<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>

		<!-- Font Awesome -->
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
	</head>
	<body>
		<header>
			<div class="header-logo">
    <div>
        <a href="../introduction/introduction.html">
            <img alt="logo" title="FreeFem++ documentation" src="../_static/img/Logo.png" />
        </a>
    </div>
</div>
<div class="header-title">
    <div>
        <a href="../introduction/introduction.html">
            <h2>FreeFem++ documentation</h2>
        </a>
    </div>
</div>
<div class="header-github">
    <a href="https://github.com/FreeFem/FreeFem-sources">
        <div class="header-github-img">
            <img alt="GitHub" title="FreeFem++ on GitHub" src="../_static/img/GitHub-Mark-120px-plus.png" />
        </div>
        <div class="header-github-title">
            <div class="header-github-title-text">
                FreeFem++ on GitHub
            </div>
            <div class="header-github-title-stars">
                <span id="headerGithubStars"></span> stars - <span id="headerGithubForks"></span> forks
            </div>
        </div>
    </a>
</div>
<script src="../_static/js/github.js"></script>
		</header>
		
		<nav>
			<script>nav("../")</script>
			<div class="search">
				<script async src="../_static/js/lunr.js"></script>
<script async src="../_static/lunr_index.js"></script>

<script src="../_static/js/search.js"></script>

<div class="search">
    <input type="search" id="searchInput" placeholder="Search..." oninput="search(this.value);" />
    <div class="searchResults">
        <div id="resultCount">
        </div>
        <div id="searchResults">
        </div>
    </div>
</div>
			</div>
		</nav>
		

		
		<div class="container">
			<div class="toc" id="toc">
				<div>
					<ul>
<li><a class="reference internal" href="#">Wifi Propagation</a><ul>
<li><a class="reference internal" href="#summary">Summary</a></li>
<li><a class="reference internal" href="#physics">Physics</a></li>
<li><a class="reference internal" href="#coding">Coding</a><ul>
<li><a class="reference internal" href="#the-domain">The domain</a></li>
<li><a class="reference internal" href="#lets-create-a-mesh">Let’s create a mesh</a></li>
</ul>
</li>
</ul>
</li>
</ul>

				</div>
			</div>
			<div class="content">
				<div>
					
    <div class="section" id="wifi-propagation">
<h1>Wifi Propagation<a class="headerlink" href="#wifi-propagation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>In this tutorial, we will study the wifi signal power in a flat.
An awesome flat is especially designed for the experiment, with <strong>2</strong> walls:</p>
<div class="figure" id="id1">
<img alt="../_images/house.png" src="../_images/house.png" />
<p class="caption"><span class="caption-number">Fig. 118 </span><span class="caption-text">Flat</span></p>
</div>
<p>Even if the flat seems small enough to be covered by wifi everywhere, it is still interesting to study where the signal’s power is the lowest.
We will study where to put the hotspot to get the best coverage, and as we’re a bit lazy we will only put it next to the left wall.</p>
</div>
<div class="section" id="physics">
<h2>Physics<a class="headerlink" href="#physics" title="Permalink to this headline">¶</a></h2>
<p>In a nutshell, the Wifi is a electromagnetic wave that contains a signal : Internet data.
Electromagnetic waves are well know by physicists and are ruled by the <strong>4 Maxwell equations</strong> which give you the solution for <em>E</em>, the electrical field, and <em>B</em>, the magnetic field, in space but also in time.</p>
<p>We don’t care about the time here, because the signal period is really short so our internet quality will not change with time.
Without time, we’re looking for stationaries solutions, and the Maxwell equations can be simplified to one equation, the Helmholtz one :</p>
<div class="math notranslate nohighlight">
\[\nabla^{2}E + \frac{k^{2}}{n^{2}}E = 0\]</div>
<p>Where <em>k</em> is the angular wavenumber of the wifi signal, and <em>n</em> the refractive index of the material the wave is in.</p>
<p>Indeed, the main point of this study is the impact of <strong>walls</strong> on the signal’s power, where the <em>n</em> is different from air (where it is 1).
In walls, the refractive index is a complex number in which the two parts have a physic interpretation:</p>
<ul class="simple">
<li>The <em>real part</em> defines the <strong>reflexion</strong> of the wall (the amount of signal that doesn’t pass).</li>
<li>The <em>imaginary part</em> defines the <strong>absorption</strong> of the wall (the amount that disappears).</li>
</ul>
<p>The wifi hotspot (simulated by a simple circle) will be the boundary condition, with a non null value for our electrical field.</p>
</div>
<div class="section" id="coding">
<h2>Coding<a class="headerlink" href="#coding" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-domain">
<h3>The domain<a class="headerlink" href="#the-domain" title="Permalink to this headline">¶</a></h3>
<p>In order to create the domain of experimentation, we need to create <code class="code freefem docutils literal highlight highlight-freefem"><span></span><span class="kt">border</span></code> objects, like this :</p>
<div class="highlight-freefem notranslate"><div class="highlight"><pre><span></span><span class="kt">real</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">40</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">40</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>
<span class="kt">border</span> <span class="nf">a00</span><span class="p">(</span><span class="kp">t</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span><span class="kr">x</span><span class="o">=</span><span class="n">a</span><span class="o">*</span><span class="kp">t</span><span class="p">;</span> <span class="kr">y</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="kr">label</span><span class="o">=</span><span class="mi">1</span><span class="p">;}</span>
<span class="kt">border</span> <span class="nf">a10</span><span class="p">(</span><span class="kp">t</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span><span class="kr">x</span><span class="o">=</span><span class="n">a</span><span class="p">;</span> <span class="kr">y</span><span class="o">=</span><span class="n">b</span><span class="o">*</span><span class="kp">t</span><span class="p">;</span> <span class="kr">label</span><span class="o">=</span><span class="mi">1</span><span class="p">;}</span>
<span class="kt">border</span> <span class="nf">a20</span><span class="p">(</span><span class="kp">t</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span><span class="kr">x</span><span class="o">=</span><span class="n">a</span><span class="o">*</span><span class="kp">t</span><span class="p">;</span> <span class="kr">y</span><span class="o">=</span><span class="n">b</span><span class="p">;</span> <span class="kr">label</span><span class="o">=</span><span class="mi">1</span><span class="p">;}</span>
<span class="kt">border</span> <span class="nf">a30</span><span class="p">(</span><span class="kp">t</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span><span class="kr">x</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="kr">y</span><span class="o">=</span><span class="n">b</span><span class="o">*</span><span class="kp">t</span><span class="p">;</span> <span class="kr">label</span><span class="o">=</span><span class="mi">1</span><span class="p">;}</span>
<span class="kt">border</span> <span class="nf">a01</span><span class="p">(</span><span class="kp">t</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span><span class="kr">x</span><span class="o">=</span><span class="n">c</span><span class="o">+</span><span class="p">(</span><span class="n">a</span><span class="o">-</span><span class="n">c</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="kp">t</span><span class="p">;</span> <span class="kr">y</span><span class="o">=</span><span class="n">c</span><span class="p">;</span> <span class="kr">label</span><span class="o">=</span><span class="mi">1</span><span class="p">;}</span>
<span class="kt">border</span> <span class="nf">a11</span><span class="p">(</span><span class="kp">t</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span><span class="kr">x</span><span class="o">=</span><span class="n">a</span><span class="o">-</span><span class="n">c</span><span class="p">;</span> <span class="kr">y</span><span class="o">=</span><span class="n">c</span><span class="o">+</span><span class="p">(</span><span class="n">b</span><span class="o">-</span><span class="n">c</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="kp">t</span><span class="p">;</span> <span class="kr">label</span><span class="o">=</span><span class="mi">1</span><span class="p">;}</span>
<span class="kt">border</span> <span class="nf">a21</span><span class="p">(</span><span class="kp">t</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span><span class="kr">x</span><span class="o">=</span><span class="n">c</span><span class="o">+</span><span class="p">(</span><span class="n">a</span><span class="o">-</span><span class="n">c</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="kp">t</span><span class="p">;</span> <span class="kr">y</span><span class="o">=</span><span class="n">b</span><span class="o">-</span><span class="n">c</span><span class="p">;</span> <span class="kr">label</span><span class="o">=</span><span class="mi">1</span><span class="p">;}</span>
<span class="kt">border</span> <span class="nf">a31</span><span class="p">(</span><span class="kp">t</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span><span class="kr">x</span><span class="o">=</span><span class="n">c</span><span class="p">;</span> <span class="kr">y</span><span class="o">=</span><span class="n">c</span><span class="o">+</span><span class="p">(</span><span class="n">b</span><span class="o">-</span><span class="n">c</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="kp">t</span><span class="p">;</span> <span class="kr">label</span><span class="o">=</span><span class="mi">1</span><span class="p">;}</span>

<span class="kt">real</span> <span class="n">p</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">q</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="nf">d</span> <span class="o">=</span> <span class="mi">34</span><span class="p">,</span> <span class="n">e</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="kt">border</span> <span class="nf">b00</span><span class="p">(</span><span class="kp">t</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span><span class="kr">x</span><span class="o">=</span><span class="n">p</span><span class="o">+</span><span class="nf">d</span><span class="o">*</span><span class="kp">t</span><span class="p">;</span> <span class="kr">y</span><span class="o">=</span><span class="n">q</span><span class="p">;</span> <span class="kr">label</span><span class="o">=</span><span class="mi">3</span><span class="p">;}</span>
<span class="kt">border</span> <span class="nf">b10</span><span class="p">(</span><span class="kp">t</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span><span class="kr">x</span><span class="o">=</span><span class="n">p</span><span class="o">+</span><span class="nf">d</span><span class="p">;</span> <span class="kr">y</span><span class="o">=</span><span class="n">q</span><span class="o">+</span><span class="n">e</span><span class="o">*</span><span class="kp">t</span><span class="p">;</span> <span class="kr">label</span><span class="o">=</span><span class="mi">3</span><span class="p">;}</span>
<span class="kt">border</span> <span class="nf">b20</span><span class="p">(</span><span class="kp">t</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span><span class="kr">x</span><span class="o">=</span><span class="n">p</span><span class="o">+</span><span class="nf">d</span><span class="o">*</span><span class="kp">t</span><span class="p">;</span> <span class="kr">y</span><span class="o">=</span><span class="n">q</span><span class="o">+</span><span class="n">e</span><span class="p">;</span> <span class="kr">label</span><span class="o">=</span><span class="mi">3</span><span class="p">;}</span>
<span class="kt">border</span> <span class="nf">b30</span><span class="p">(</span><span class="kp">t</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span><span class="kr">x</span><span class="o">=</span><span class="n">p</span><span class="p">;</span> <span class="kr">y</span><span class="o">=</span><span class="n">q</span><span class="o">+</span><span class="n">e</span><span class="o">*</span><span class="kp">t</span><span class="p">;</span> <span class="kr">label</span><span class="o">=</span><span class="mi">3</span><span class="p">;}</span>

<span class="kt">real</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span><span class="mi">1</span> <span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">u</span> <span class="o">=</span> <span class="mi">15</span><span class="p">;</span>
<span class="kt">border</span> <span class="nf">c00</span><span class="p">(</span><span class="kp">t</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span><span class="kr">x</span><span class="o">=</span><span class="n">r</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="kp">t</span><span class="p">;</span> <span class="kr">y</span><span class="o">=</span><span class="n">s</span><span class="p">;</span> <span class="kr">label</span><span class="o">=</span><span class="mi">3</span><span class="p">;}</span>
<span class="kt">border</span> <span class="nf">c10</span><span class="p">(</span><span class="kp">t</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span><span class="kr">x</span><span class="o">=</span><span class="n">r</span><span class="o">+</span><span class="n">j</span><span class="p">;</span> <span class="kr">y</span><span class="o">=</span><span class="n">s</span><span class="o">+</span><span class="n">u</span><span class="o">*</span><span class="kp">t</span><span class="p">;</span> <span class="kr">label</span><span class="o">=</span><span class="mi">3</span><span class="p">;}</span>
<span class="kt">border</span> <span class="nf">c20</span><span class="p">(</span><span class="kp">t</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span><span class="kr">x</span><span class="o">=</span><span class="n">r</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="kp">t</span><span class="p">;</span> <span class="kr">y</span><span class="o">=</span><span class="n">s</span><span class="o">+</span><span class="n">u</span><span class="p">;</span> <span class="kr">label</span><span class="o">=</span><span class="mi">3</span><span class="p">;}</span>
<span class="kt">border</span> <span class="nf">c30</span><span class="p">(</span><span class="kp">t</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span><span class="kr">x</span><span class="o">=</span><span class="n">r</span><span class="p">;</span> <span class="kr">y</span><span class="o">=</span><span class="n">s</span><span class="o">+</span><span class="n">u</span><span class="o">*</span><span class="kp">t</span><span class="p">;</span> <span class="kr">label</span><span class="o">=</span><span class="mi">3</span><span class="p">;}</span>
</pre></div>
</div>
</div>
<div class="section" id="lets-create-a-mesh">
<h3>Let’s create a mesh<a class="headerlink" href="#lets-create-a-mesh" title="Permalink to this headline">¶</a></h3>
<div class="highlight-freefem notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="kr">n</span><span class="o">=</span><span class="mi">13</span><span class="p">;</span>
<span class="kt">mesh</span> <span class="n">Sh</span> <span class="o">=</span> <span class="nf">buildmesh</span><span class="p">(</span><span class="n">a00</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">a10</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">a20</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">a30</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span>
    <span class="o">+</span> <span class="n">a01</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">a11</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">a21</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">a31</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span>
    <span class="o">+</span> <span class="n">b00</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">b10</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">b20</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">b30</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span>
    <span class="o">+</span> <span class="n">c00</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">c10</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">c20</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">c30</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="kr">n</span><span class="p">));</span>
<span class="nf">plot</span><span class="p">(</span><span class="n">Sh</span><span class="p">,</span> <span class="kp">wait</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
<p>So we are creating a <code class="code freefem docutils literal highlight highlight-freefem"><span></span><span class="kt">mesh</span></code>, and plotting it :</p>
<div class="figure" id="id2">
<img alt="../_images/mesh.png" src="../_images/mesh.png" />
<p class="caption"><span class="caption-number">Fig. 119 </span><span class="caption-text">Mesh</span></p>
</div>
<p>There is currently no wifi hotspot, and as we want to resolve the equation for a multiple number of position next to the left wall, let’s do a <code class="code freefem docutils literal highlight highlight-freefem"><span></span><span class="k">for</span></code> loop:</p>
<div class="highlight-freefem notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">bx</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="n">bx</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">bx</span> <span class="o">&lt;=</span> <span class="mi">7</span><span class="p">;</span> <span class="n">bx</span><span class="o">++</span><span class="p">){</span>
    <span class="kt">border</span> <span class="n">C</span><span class="p">(</span><span class="kp">t</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="kr">pi</span><span class="p">){</span><span class="kr">x</span><span class="o">=</span><span class="mi">2</span><span class="o">+</span><span class="nf">cos</span><span class="p">(</span><span class="kp">t</span><span class="p">);</span> <span class="kr">y</span><span class="o">=</span><span class="n">bx</span><span class="o">*</span><span class="mi">5</span><span class="o">+</span><span class="nf">sin</span><span class="p">(</span><span class="kp">t</span><span class="p">);</span> <span class="kr">label</span><span class="o">=</span><span class="mi">2</span><span class="p">;}</span>

    <span class="kt">mesh</span> <span class="n">Th</span> <span class="o">=</span> <span class="nf">buildmesh</span><span class="p">(</span><span class="n">a00</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">a10</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">a20</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">a30</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span>
        <span class="o">+</span> <span class="n">a01</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">a11</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">a21</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">a31</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">C</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="o">+</span> <span class="n">b00</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">b10</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">b20</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">b30</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span>
        <span class="o">+</span> <span class="n">c00</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">c10</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">c20</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="kr">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">c30</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="kr">n</span><span class="p">));</span>
</pre></div>
</div>
<p>The border <code class="docutils literal highlight highlight-default"><span></span><span class="n">C</span></code> is our hotspot and as you can see a simple circle.
<code class="docutils literal highlight highlight-default"><span></span><span class="n">Th</span></code> is our final mesh, with all borders and the hotspot.
Let’s resolve this equation !</p>
<div class="highlight-freefem notranslate"><div class="highlight"><pre><span></span><span class="kt">fespace</span> <span class="nf">Vh</span><span class="p">(</span><span class="n">Th</span><span class="p">,</span> <span class="nc">P1</span><span class="p">);</span>
<span class="kt">func</span> <span class="kt">real</span> <span class="nf">wall</span><span class="p">()</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">Th</span><span class="p">(</span><span class="kr">x</span><span class="p">,</span><span class="kr">y</span><span class="p">).</span><span class="kr">region</span> <span class="o">==</span> <span class="n">Th</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">).</span><span class="kr">region</span> <span class="o">||</span> <span class="n">Th</span><span class="p">(</span><span class="kr">x</span><span class="p">,</span><span class="kr">y</span><span class="p">).</span><span class="kr">region</span> <span class="o">==</span> <span class="n">Th</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mf">20.5</span><span class="p">).</span><span class="kr">region</span> <span class="o">||</span> <span class="n">Th</span><span class="p">(</span><span class="kr">x</span><span class="p">,</span><span class="kr">y</span><span class="p">).</span><span class="kr">region</span> <span class="o">==</span> <span class="n">Th</span><span class="p">(</span><span class="mf">30.5</span><span class="p">,</span><span class="mi">2</span><span class="p">).</span><span class="kr">region</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>

<span class="n">Vh</span><span class="o">&lt;</span><span class="kt">complex</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">,</span><span class="n">w</span><span class="p">;</span>

<span class="nf">randinit</span><span class="p">(</span><span class="mi">900</span><span class="p">);</span>
<span class="n">Vh</span> <span class="n">wallreflexion</span> <span class="o">=</span> <span class="nf">randreal1</span><span class="p">();</span>
<span class="n">Vh</span><span class="o">&lt;</span><span class="kt">complex</span><span class="o">&gt;</span> <span class="n">wallabsorption</span> <span class="o">=</span> <span class="nf">randreal1</span><span class="p">()</span><span class="o">*</span><span class="mf">0.5</span><span class="n">i</span><span class="p">;</span>
<span class="n">Vh</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>

<span class="kr">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Reflexion of walls : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">wallreflexion</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="kr">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Absorption of walls : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">wallabsorption</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>

<span class="kt">problem</span> <span class="nf">muwave</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="n">w</span><span class="p">)</span> <span class="o">=</span>
    <span class="nf">int2d</span><span class="p">(</span><span class="n">Th</span><span class="p">)(</span>
          <span class="p">(</span><span class="n">v</span><span class="o">*</span><span class="n">w</span><span class="o">*</span><span class="n">k</span><span class="o">^</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="p">(</span><span class="n">wallreflexion</span><span class="o">+</span><span class="n">wallabsorption</span><span class="p">)</span><span class="o">*</span><span class="n">wall</span><span class="p">())</span><span class="o">^</span><span class="mi">2</span>
        <span class="o">-</span> <span class="p">(</span><span class="nf">dx</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">*</span><span class="nf">dx</span><span class="p">(</span><span class="n">w</span><span class="p">)</span><span class="o">+</span><span class="nf">dy</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">*</span><span class="nf">dy</span><span class="p">(</span><span class="n">w</span><span class="p">))</span>
    <span class="p">)</span>
    <span class="o">+</span> <span class="nf">on</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">v</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">;</span>

<span class="n">muwave</span><span class="p">;</span>
<span class="n">Vh</span> <span class="n">vm</span> <span class="o">=</span> <span class="nf">log</span><span class="p">(</span><span class="kt">real</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">^</span><span class="mi">2</span> <span class="o">+</span> <span class="nf">imag</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">^</span><span class="mi">2</span><span class="p">);</span>
<span class="nf">plot</span><span class="p">(</span><span class="n">vm</span><span class="p">,</span> <span class="kp">wait</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="kp">fill</span><span class="o">=</span><span class="kr">true</span><span class="p">,</span> <span class="kp">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="kp">nbiso</span><span class="o">=</span><span class="mi">65</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A bit of understanding here :</p>
<ul class="simple">
<li>The <code class="code freefem docutils literal highlight highlight-freefem"><span></span><span class="kt">fespace</span></code> keyword defines a finite elements space, no need to know more here.</li>
<li>The function <code class="docutils literal highlight highlight-default"><span></span><span class="n">wall</span></code> return 0 if in air and 1 if in a wall (x and y are global variables).</li>
<li>For this example, random numbers are used for the reflexion and the absorption.</li>
<li>The problem is defined with <code class="code freefem docutils literal highlight highlight-freefem"><span></span><span class="kt">problem</span></code> and we solve it by calling it.</li>
</ul>
<p>Finally, I plotted the <span class="math notranslate nohighlight">\(\log\)</span> of the module of the solution <code class="docutils literal highlight highlight-default"><span></span><span class="n">v</span></code> to see the signal’s power, and here we are :</p>
<div class="figure" id="id3">
<img alt="../_images/point1.png" src="../_images/point1.png" />
<p class="caption"><span class="caption-number">Fig. 120 </span><span class="caption-text">Solution</span></p>
</div>
<p>Beautiful isn’t it ? This is the first position for the hotspot, but there are 6 others, and the electrical field is evolving depending on the position.
You can see the other positions here :</p>
<div class="inline3 figure" id="id4">
<img alt="../_images/point2.png" src="../_images/point2.png" />
<p class="caption"><span class="caption-number">Fig. 121 </span><span class="caption-text">Point 2</span></p>
</div>
<div class="inline3 figure" id="id5">
<img alt="../_images/point3.png" src="../_images/point3.png" />
<p class="caption"><span class="caption-number">Fig. 122 </span><span class="caption-text">Point 3</span></p>
</div>
<div class="inline3 figure" id="id6">
<img alt="../_images/point4.png" src="../_images/point4.png" />
<p class="caption"><span class="caption-number">Fig. 123 </span><span class="caption-text">Point 4</span></p>
</div>
<div class="inline3 figure" id="id7">
<img alt="../_images/point5.png" src="../_images/point5.png" />
<p class="caption"><span class="caption-number">Fig. 124 </span><span class="caption-text">Point 5</span></p>
</div>
<div class="inline3 figure" id="id8">
<img alt="../_images/point6.png" src="../_images/point6.png" />
<p class="caption"><span class="caption-number">Fig. 125 </span><span class="caption-text">Point 6</span></p>
</div>
<div class="inline3 figure" id="id9">
<img alt="../_images/point7.png" src="../_images/point7.png" />
<p class="caption"><span class="caption-number">Fig. 126 </span><span class="caption-text">Point 7</span></p>
</div>
</div>
</div>
</div>


				</div>
			</div>
		</div>
		
		<footer>
			<script>
    let date = new Date()
    let currentYear = date.getFullYear()
</script>
<div class="footer-text">
    <a href="https://freefem.org/">FreeFem++</a> 1987-<script>document.write(currentYear)</script>
</div>
<div class="footer-img">
    <p>
        Made with <i class="fas fa-heart"></i> on
    </p>
    <span class="separator"></span>
    <a href="https://github.com/FreeFem">
        <img alt="Github" title="Github" src="../_static/img/GitHub_Logo_White.png" />
    </a>
</div>
		</footer>
		

		<script src="../_static/js/toc.js"></script>
	</body>
</html>